{% extends 'core/base.html' %} 

{% block title %} Obfuscator {% endblock %} 

{% block content %}
  <div class="container mx-auto px-4 py-5">
    <h1 class="text-4xl font-bold text-center text-blue-700 mb-4">Welcome to the Obfuscator!</h1>
    <p class="text-lg text-gray-700 mb-4">
      Select your image and executable files to start the obfuscation process.
    </p>

    <form class="center" method="post" enctype="multipart/form-data" action="{% url 'upload_deobfuscated_files' %}">
      {% csrf_token %}

      <div class="file-upload flex flex-col items-center space-y-4">
        <!-- First Choose File input -->
        <div>
          <label for="image" class="block text-gray-700 text-sm font-bold mb-2">Choose Image File:</label>
          <input type="file" name="image" id="image" accept=".jpg, .jpeg, .png" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>

        <!-- Second Choose File input -->
        <div>
          <label for="executable" class="block text-gray-700 text-sm font-bold mb-2">Choose Executable File:</label>
          <input type="file" name="executable" id="executable" accept=".exe" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
        </div>

        <!-- Single Upload button -->
        <button class="px-4 py-2 text-lg font-semibold bg-blue-500 text-white rounded-xl hover:bg-blue-700" type="submit" id="uploadButton">Upload</button>
      </div>
    </form>

    {% if obfuscation_successful %}
      <div class="mt-4">
        <!-- Download button for obfuscated file -->
        <a href="{% url 'download_obfuscated_file' %}" class="px-4 py-2 text-lg font-semibold bg-green-500 text-white rounded-xl hover:bg-green-700">Download Obfuscated File</a>
      </div>
    {% endif %}
  </div>
{% endblock %}